# nostr - Нотатки та Інше Передане через Реле

Найпростіший відкритий протокол, який здатний створити стійку до цензури глобальну "соціальну" мережу раз і назавжди.

Він не залежить від жодного центрального сервера, на якому можна довірятися, тому він стійкий; він базується на криптографічних ключах та підписах, отже, він захищений від змін; він не залежить від P2P-технік, і тому він працює.

Це робота в процесі. [Приєднуйтесь до групи Telegram!](https://t.me/nostr_protocol)

## Дуже короткий підсумок того, як це працює, якщо ви не плануєте читати щось інше:

Кожен використовує клієнт. Це може бути рідний клієнт, веб-клієнт тощо. Щоб опублікувати щось, ви пишете повідомлення, підписуєте його своїм ключем та відправляєте на кілька реле (сервери, розміщені кимось іншим або вами самими). Щоб отримати оновлення від інших людей, ви запитуєте кілька реле, чи знають вони щось про цих інших людей. Будь-хто може запустити реле. Реле дуже просте та тупе. Воно нічого не робить, крім прийому повідомлень від деяких людей та пересилання їх іншим. Реле не мають бути довіреними. Підписи перевіряються на стороні клієнта.

[Як почати використовувати Nostr](https://github.com/vishalxl/nostr_console/discussions/31)

[Порівняння можливостей клієнтів Nostr](https://github.com/vishalxl/Nostr-Clients-Features-List/blob/main/Readme.md)

[Список проектів, заснованих на Nostr](https://github.com/aljazceru/awesome-nostr)

## Це потрібно, тому що інші рішення не працюють:

### Проблема з Twitter

- У Twitter є реклама;
- Twitter використовує дивні методи, щоб залучити вас;
- Twitter не показує реальний історичний стрічку від людей, яких ви слідкуєте;
- Twitter блокує людей;
- Twitter тіньово блокує людей;
- У Twitter багато спаму.

### Проблема з Mastodon та схожими програмами

- Ідентичності користувачів прив'язані до доменних імен, які контролюються третіми сторонами;
- Власники серверів можуть вас заблокувати, так само, як і Twitter; Власники серверів також можуть блокувати інші сервери;
- Міграція між серверами не є важливою та може бути здійснена лише за умови співпраці серверів. Це не працює в конфліктному середовищі (усі читачі втрачаються);
- Немає чітких стимулів для запуску серверів, тому їх зазвичай запускають ентузіасти та люди, які хочуть пов'язати своє ім'я з крутим доменом. В результаті користувачі піддаються деспотії однієї особи, що часто гірше, ніж у великої компанії типу Twitter, і вони не можуть мігрувати;
- Оскільки сервери часто запускаються недосвідчено, вони часто покидаються через певний час, що фактично еквівалентно блокуванню всіх;
- Немає сенсу мати безліч серверів, якщо оновлення з кожного сервера будуть болісно надсилатися (та зберігатися!) на безліч інших серверів. Ця проблема погіршується тим, що сервери мають тенденцію існувати у великій кількості, тому більше даних повинно передаватися більшому числу місць частіше;
- Щодо конкретного прикладу обміну відео, ентузіасти ActivityPub зрозуміли, що повністю неможливо передавати відео з сервера на сервер таким чином, як текстові нотатки, тому вони вирішили зберігати відео лише на одному екземплярі, де воно було опубліковано, що схоже на підхід Nostr.


### Проблема з SSB (Secure Scuttlebutt)

- У нього немає багатьох проблем. Я вважаю, що він чудовий. Я збирався використовувати його як основу для цього, але
- його протокол занадто складний, тому що він зовсім не розглядався як відкритий протокол. Він просто був написаний на JavaScript, мабуть, швидким способом для вирішення конкретної проблеми, і відтоді розвивався, тому у ньому є дивні та непотрібні штуки, такі як підписання рядка JSON, який повинен строго дотримуватися правил [_ECMA-262 6th Edition_](https://www.ecma-international.org/ecma-262/6.0/#sec-json.stringify);
- Він наполягає на наявності ланцюжка оновлень від одного користувача, що, на мою думку, зайве, і це додає непотрібний об'єм і жорсткість до річі — кожен сервер/користувач повинен зберігати весь ланцюжок повідомлень, щоб переконатися, що нове повідомлення дійсне. Навіщо? (Можливо, у них є хороша причина);
- Він не такий простий, як Nostr, оскільки спочатку був створений для P2P-синхронізації, а "паби" були додатковою думкою;
- Проте, може варто розглянути використання SSB замість цього спеціального протоколу і просто адаптувати його до моделі клієнт-релейний сервер, тому що повторне використання стандарту завжди краще, ніж намагатися залучити людей до нового.

### Проблема з іншими рішеннями, які вимагають, щоб кожен запускав власний сервер

- Вони вимагають від кожного запускати свій власний сервер;
- Іноді люди все ще можуть бути піддані цензурі в таких випадках, оскільки доменні імена можуть бути піддані цензурі.

## Як працює Nostr?

- Є дві складові: __клієнти__ та __релейні сервери__. Кожен користувач запускає клієнт. Будь-хто може запустити релейний сервер.
- Кожного користувача ідентифікує відкритий ключ. Кожне повідомлення підписане. Кожен клієнт перевіряє ці підписи.
- Клієнти отримують дані від релейних серверів на свій вибір та публікують дані на інших релейних серверах на свій вибір. Релейний сервер не спілкується з іншим релейним сервером, а лише безпосередньо з користувачами.
- Наприклад, щоб "підписатися" на когось, користувач просто надає своєму клієнту інструкції щодо запитів до релейних серверів, які він знає, про повідомлення від цього відкритого ключа.
- При запуску клієнт запитує дані від усіх відомих релейних серверів для всіх користувачів, на яких він підписаний (наприклад, всі оновлення за останній день), а потім відображає ці дані користувачеві в хронологічному порядку.
- "Повідомлення" може містити будь-які структуровані дані, але найбільш вживані з них потраплять у стандарт, щоб усі клієнти та релейні сервери могли обробляти їх безшовно.

## Як він вирішує проблеми, які мережі вище не можуть?

- **Користувачі отримують бан, а сервери закриваються**
  - Релейний сервер може заблокувати користувача від публікації будь-чого там, але це не вплине на них, оскільки вони все ще можуть публікувати на інших релейних серверах. Оскільки користувачів ідентифікують за допомогою відкритого ключа, вони не втрачають своїх особистостей та підписників, коли їх забанять.
  - Замість того, щоб вимагати від користувачів вручну вводити нові адреси релейних серверів (хоча це також повинно підтримуватися), коли хтось, на кого ви підписані, публікує рекомендацію сервера, клієнт автоматично додає її до списку релейних серверів, які він запитує.
  - Якщо хтось використовує релейний сервер для публікації своїх даних, але хоче перейти на інший, він може опублікувати рекомендацію сервера на попередньому релейному сервері та перейти;
  - Якщо когось забанять на багатьох релейних серверах таким чином, що вони не можуть розповсюджувати свої рекомендації серверів, вони все ще можуть повідомити деяким близьким друзям через інші засоби з яким релейним сервером вони зараз публікують. Потім ці близькі друзі можуть опублікувати рекомендації сервера на новому сервері, і поступово стара база підписників заблокованого користувача почне знаходити їхні повідомлення знову з нового релейного сервера.
  -  Все зазначене вище також діє, коли реле припиняє свою роботу.


- **Стійкість до цензури**
  - Кожен користувач може публікувати свої оновлення на будь-якій кількості релейних серверів.
  - Релейний сервер може стягувати плату (переговори про цю плату наразі за межами протоколу) від користувачів за публікацію там, що забезпечує стійкість до цензури (завжди буде деякий російський сервер, який готовий приймати ваші гроші в обмін на розміщення ваших повідомлень).

- **Спам**
  - Якщо спам становить проблему для релейного сервера, він може вимагати оплату за публікацію або якусь іншу форму автентифікації, таку як електронна адреса чи телефон, і пов'язувати їх внутрішньо з відкритим ключем, який потім отримує право публікувати на цьому релейному сервері - або інші анти-спам техніки, як хеш-гроші чи капча. Якщо релейний сервер використовується як вектор спаму, його можна легко виключити зі списку клієнтів, які можуть продовжувати отримувати оновлення з інших релейних серверів.

- **Зберігання даних**
  - Для того, щоб мережа залишалася здоровою, не потрібно сотень активних релейних серверів. Насправді, вона може працювати нормально лише з декількома, враховуючи те, що нові релейні сервери можуть створюватися та поширюватися мережею легко у разі, якщо існуючі релейні сервери починають поводитися неналежним чином. Тому загальний обсяг зберігання даних, який потрібен, є відносно меншим, ніж у Mastodon чи подібному програмному забезпеченні.
  - Або розглядаючи інший результат: один, в якому існує сотні нішевих реле, керованих аматорами, кожен з яких передає оновлення від невеликої групи користувачів. Архітектура масштабується так само добре: дані надсилаються від користувачів до одного сервера, а з цього сервера безпосередньо користувачам, які споживатимуть ці дані. Це не повинно зберігатися кимось іншим. В такій ситуації для будь-якого окремого сервера не є великим навантаженням обробляти оновлення від інших, і наявність аматорських серверів не є проблемою.

- **Відео та інший важкий контент**
  - Для реле легко відхилити великий контент або стягувати плату за прийняття та розміщення великого контенту. Коли інформація та стимули ясні, ринкові сили легко вирішують проблему.

- **Техніки обману користувача**
  - Кожен клієнт може вирішити, як найкраще показувати повідомлення користувачам, тому завжди є можливість просто споживати те, що ви хочете, так, як ви хочете - від використання штучного інтелекту для визначення порядку оновлень, які ви побачите, до їх читання в хронологічному порядку.

## ЧАП

- **Це дуже просто. Чому ніхто раніше цього не робив?**

  Я не знаю, але я думаю, що це пов'язано з тим, що люди, які створюють соціальні мережі, є або компаніями, які хочуть заробляти гроші, або активістами P2P, які хочуть створити щось повністю без серверів. Вони обидва не бачать специфічного поєднання обох світів, яке використовує Nostr.

- **Як знайти людей, яких слідувати?**

  Спочатку вам потрібно знати їх та отримати їх відкритий ключ якимось чином, наприклад, запитавши або побачивши його посилання десь. Коли ви будете всередині соціальної мережі Nostr, ви зможете бачити, як вони взаємодіють з іншими людьми, і тоді ви також зможете почати слідувати та спілкуватися з цими іншими.

- **Як знайти реле? Що станеться, якщо я не підключений до тих самих реле, що й хтось інший?**

  Ви не зможете спілкуватися з цією людиною. Але є підказки про події, які можна використати, щоб ваше клієнтське програмне забезпечення (або ви, вручну) знало, як підключитися до реле іншої людини та взаємодіяти з ними. В майбутньому є інші ідеї, як це вирішити, але ми не можемо гарантувати ідеальну досяжність, жоден протокол не може.

- **Чи можу я знати, скільки людей слідують за мною?**

  Ні, але ви можете отримати деякі оцінки, якщо реле співпрацюють у спосіб, що виходить за рамки протоколу.

- **Яка мотивація для людей запускати реле?**

  Запитання вводить в оману. Воно припускає, що реле - це безкоштовні "тупі труби", які існують для того, щоб люди могли передавати дані через них. В такому випадку, так, мотивація не існувала б. Насправді, це можна сказати про вузли DHT у всіх інших стеках p2p-мереж: яка мотивація для людей запускати вузли DHT?

- **Nostr дозволяє вам переходити між реле серверами або використовувати кілька реле, але якщо ці реле просто на AWS або Azure, то яка різниця?**

  На сьогоднішній день по всьому світу розкидано буквально тисячі провайдерів VPS, існують не лише AWS та Azure. Саме AWS або Azure є провайдерами, які використовуються централізованими послугами з єдиним сервером, яким потрібно багато масштабів, і навіть тоді не лише ці два. Для менших реле-серверів будь-який VPS добре впорається з роботою.

## Специфікація протоколу

Дивіться [NIPs](https://github.com/nostr-protocol/nips) і особливо [NIP-01](https://github.com/nostr-protocol/nips/blob/master/01.md) для розумного детального пояснення специфікації протоколу (підказка: він дуже короткий та простий).

## Програмне забезпечення

Список більшості програмного забезпечення, яке створено на основі Nostr, можна знайти на https://github.com/aljazceru/awesome-nostr, що, здавалося б, був майже повним останнім часом, коли я дивився.

## Ліцензія

Домен публічний.
